# Fast Cure -GATCG Life Counter- システム設計書

## 1. システムアーキテクチャ

### 1.1 全体アーキテクチャ
- クロスプラットフォームアプリケーション（Flutter）
- マテリアルデザインベースのUI
- ステート管理によるデータフロー

### 1.2 技術スタック
- フレームワーク: Flutter
- 言語: Dart
- UI: Material Design
- 開発環境: Flutter SDK

### 1.3 プラットフォーム対応
- モバイル（iOS/Android）
- Web
- デスクトップ（macOS/Windows/Linux）

## 2. コンポーネント構成

### 2.1 主要コンポーネント
1. **MyApp**
   - アプリケーションのエントリーポイント
   - テーマ設定
   - ルート画面の設定

2. **LifeCounterPage**
   - メインページコンポーネント
   - ステート管理
   - プレイヤーエリアの構築

3. **PlayerArea**
   - プレイヤー別のUI領域
   - ライフポイント表示
   - 操作ボタン

### 2.2 状態管理
1. **ステート変数**
   ```dart
   int player1Life
   int player2Life
   bool player1LeftPressed
   bool player1RightPressed
   bool player2LeftPressed
   bool player2RightPressed
   ```

2. **状態更新メソッド**
   ```dart
   void _updateLife(bool isPlayer1, bool isIncrease)
   void _resetLife()
   ```

### 2.3 UIコンポーネント階層
```
MyApp
└── MaterialApp
    └── LifeCounterPage
        ├── PlayerArea (Player 2)
        ├── ResetButton
        └── PlayerArea (Player 1)
```

## 3. インターフェース定義

### 3.1 ユーザーインターフェース
1. **プレイヤーエリア**
   - 表示要素：
     - ライフポイント値（大きな数字）
     - 増減ボタン（+/-）
   - 操作：
     - タップによるライフポイント増減
     - ビジュアルフィードバック

2. **リセットボタン**
   - 表示要素：
     - "Reset"テキスト
     - ボタンUI
   - 操作：
     - タップによるリセット実行

### 3.2 レイアウト仕様
1. **画面レイアウト**
   - 縦型レイアウト
   - プレイヤー2エリア（上部、180度回転）
   - リセットボタン（中央）
   - プレイヤー1エリア（下部）

2. **レスポンシブ対応**
   - Expandedウィジェットによる動的サイズ調整
   - 異なる画面サイズへの適応

### 3.3 アニメーション
1. **ボタン押下時**
   - 透明度変更アニメーション
   - Duration: 100ミリ秒

2. **ライフポイント更新**
   - 即時更新
   - 視覚的フィードバック

## 4. データフロー

### 4.1 ライフポイント操作
1. ユーザーアクション
2. ステート更新（setState）
3. UI再描画

### 4.2 リセット操作
1. リセットボタン押下
2. 両プレイヤーのライフポイントを0に設定
3. UI再描画

## 5. エラーハンドリング

### 5.1 バリデーション
- ライフポイントの最小値（0）チェック
- 不正な操作の防止

### 5.2 エッジケース
- 急速なタップ操作への対応
- 画面回転時の表示制御

## 6. パフォーマンス最適化

### 6.1 描画最適化
- const constructorの活用
- 必要最小限のウィジェット再描画

### 6.2 メモリ管理
- 効率的なステート管理
- リソースの適切な解放

## 7. セキュリティ考慮事項

### 7.1 データ保護
- ローカルでの動作のみ
- 外部との通信なし

### 7.2 アプリケーションセキュリティ
- 安全なステート管理
- プラットフォーム標準のセキュリティ対応